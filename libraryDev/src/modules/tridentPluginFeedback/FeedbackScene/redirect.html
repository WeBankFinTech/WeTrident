<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title></title>
</head>
<body>

</body>
<script type="text/javascript">
  /**
   * 发起接入请求
   * @param  {Number} productId  需要接入产品 id
   * @param  {[Object]} data     需要传递的用户信息
   */
  const request = function (productId, data) {
    var form = document.createElement('form')
    form.id = 'form'
    form.name = 'form'
    document.body.appendChild(form)

    // 设置相应参数
    for (var key in data) {
      var input = document.createElement('input')
      input.type = 'text'
      input.name = key
      input.value = data[key]
      // 将该输入框插入到 form 中
      form.appendChild(input)
    }
    // form 的提交方式
    form.method = 'POST'
    // form 提交路径
    form.action = 'https://support.qq.com/product/' + productId
    // 对该 form 执行提交
    form.submit()
    // 删除该 form
    document.body.removeChild(form)
  }

  var count = 0

  function start () {
    if (window.FEEDBACK_PARAMS && window.FEEDBACK_PARAMS.prodID && count < 3) {
      request(window.FEEDBACK_PARAMS.prodID, window.FEEDBACK_PARAMS.data)
    } else {
      setTimeout(function() {
        count++
        start()
      }, 300)
    }
  }

  start()

</script>
</html>